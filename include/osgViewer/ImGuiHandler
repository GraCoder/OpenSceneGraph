#ifndef OSGVIEWER_IMGUIHANDLER
#define OSGVIEWER_IMGUIHANDLER 1

#include <osg/DisplaySettings>
#include <osgGA/GUIEventHandler>
#include <osgViewer/Export>

struct ImGuiViewportP;

namespace osgViewer
{

class OSGVIEWER_EXPORT ImGuiHandler : public osgGA::GUIEventHandler
{
	friend class ImGuiRenderObject;
public:

    ImGuiHandler();

	~ImGuiHandler();

    bool handle(const osgGA::GUIEventAdapter& ea, osgGA::GUIActionAdapter& aa);

protected:

	void initImGui();

	void newImGuiFrame(osgViewer::Viewer *viewer);

private:
	osg::ref_ptr<osg::Camera> _camera;

	bool	_initialized;
	bool	_mousePressed[3];
	bool	_mouseDoubleClicked[3];
	int		_mouseWheel;

	int		_width, _height;

	osg::ref_ptr<osg::Operation> _renderOperation;
	ImGuiViewportP* _imvp[2];
};

}

#endif
